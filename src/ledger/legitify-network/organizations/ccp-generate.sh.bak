function one_line_pem {
    echo "`awk 'NF {sub(/\\n/, ""); printf "%s\\\\\\\n",$0;}' $1`"
}

# Generate the connection profile for orgnewuniversity
function gen_ccp_orgnewuniversity() {
  local PP=$(one_line_pem $PEER0_OrgNewUniversityMSP_PEM)
  local CP=$(one_line_pem $CA_OrgNewUniversityMSP_PEM)
  sed -e "s/\${ORG}/orgnewuniversity/" \
      -e "s/\${P0PORT}/10051/" \
      -e "s/\${CAPORT}/11054/" \
      -e "s#\${PEERPEM}#$PP#" \
      -e "s#\${CAPEM}#$CP#" \
      organizations/ccp-template.json > organizations/peerOrganizations/orgnewuniversity.com/connection-orgnewuniversity.json
}
PEER0_OrgNewUniversityMSP_PEM=organizations/peerOrganizations/orgnewuniversity.com/tlsca/tlsca.orgnewuniversity.com-cert.pem
CA_OrgNewUniversityMSP_PEM=organizations/peerOrganizations/orgnewuniversity.com/ca/ca.orgnewuniversity.com-cert.pem

echo "Generating CCP files for orgnewuniversity"
gen_ccp_orgnewuniversity
